## –õ–∞–±–∞ 1. –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏–∑ 4 –º–∞—à–∏–Ω –≤ –æ–±–ª–∞–∫–µ —Å –ø–æ–º–æ—â—å—é Ambari –æ—Ç Hortonworks

##### [![New Professions Lab ‚Äî Big Data 8](http://data.newprolab.com/public-newprolab-com/npl7.svg)](https://github.com/newprolab/content_bigdata8)

### –î–µ–¥–ª–∞–π–Ω

‚è∞ 1 –∞–ø—Ä–µ–ª—è 2018 –≥–æ–¥–∞, 23:59 –ø–æ –ú–æ—Å–∫–≤–µ

### –ó–∞–¥–∞—á–∞

Hadoop-–∫–ª–∞—Å—Ç–µ—Ä —É–¥–æ–±–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π —É—Ç–∏–ª–∏—Ç—ã Ambari –æ—Ç Hortonworks. –ò–º–µ–Ω–Ω–æ —ç—Ç–æ –∏ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –≤–∞–º —Å–¥–µ–ª–∞—Ç—å –≤ —ç—Ç–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ, –∞, —Å–∫–æ—Ä–µ–µ, —Ç—É—Ç–æ—Ä–∏–∞–ª–µ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∫–ª–∞—Å—Ç–µ—Ä–∞. –í–æ—Ç —É–≤–∏–¥–∏—Ç–µ ‚Äî¬†—ç—Ç–æ –Ω–µ—Å–ª–æ–∂–Ω–æ –∏ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ.

–ú—ã —Ä–∞–∑–±–∏–ª–∏ –∑–∞–¥–∞—á—É –Ω–∞ 4 —á–∞—Å—Ç–∏:

1. –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –º–∞—à–∏–Ω–∞–º –≤ –õ–ö.
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ambari –Ω–∞ –æ–¥–Ω–æ–π –∏–∑ –º–∞—à–∏–Ω.
3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫ Ambari –∏ —Å–æ–±—Ä–∞—Ç—å –∏–∑ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –Ω–æ–¥ –∫–ª–∞—Å—Ç–µ—Ä.
4. –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ.

–ö–æ–≥–¥–∞ –≤—ã –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ —á–µ—Ç—ã—Ä–µ —á–∞—Å—Ç–∏ –∑–∞–¥–∞–Ω–∏—è, –∑–∞–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π [–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç](http://lk.newprolab.com/) ‚Äî —Ç–∞–º –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –ø–æ–º–æ—â—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∏. 

### –ß–∞—Å—Ç—å 1. –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –º–∞—à–∏–Ω–∞–º –≤ –õ–ö
–ó–∞–π–¥–∏—Ç–µ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—à–∏–Ω
http://lk.newprolab.com/amazon/ 

–ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä—É–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø—É–ª –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Äú–ó–∞–ø—É—Å—Ç–∏—Ç—å‚Äù.

–í–∞—à–∏ –º–∞—à–∏–Ω—ã –Ω–∞—á–∞–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é:
![img101](images/img101.png)

–ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ, –ø–æ—Ç–æ–º –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ‚Äú–û–±–Ω–æ–≤–∏—Ç—å‚Äù, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∞—Ç—É—Å–µ –∑–∞–ø—É—Å–∫–∞ –º–∞—à–∏–Ω. –ö–æ–Ω–Ω–µ–∫—Ç–∏—Ç—å—Å—è –º–æ–∂–Ω–æ, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–∞–ø–∏—Å–∞–Ω–æ running. –û–Ω–∏ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –Ω–∞ –æ–¥–∏–Ω —á–∞—Å –∏ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–±–∏–≤–∞—é—Ç—Å—è. –ï—Å–ª–∏ —á–∞—Å–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–ª–∏—Ç—å –≤—Ä–µ–º—è –µ—â—ë –Ω–∞ —á–∞—Å.

![img102](images/img102.png)

‚ö†Ô∏è –ï—Å–ª–∏ –º–∞—à–∏–Ω—ã –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ, –Ω–∞–ø–∏—à–∏—Ç–µ –∫—É—Ä–∞—Ç–æ—Ä—É –∫—É—Ä—Å–∞ –∏–ª–∏ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–æ–∂–¥–∏—Ç–µ: –µ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Å—Ç–∞–Ω—Å—ã.

–ù–∏–∫–∞–∫–æ–π –º–∞–≥–∏–∏ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –¥–ª—è –≤–∞—Å —Å–æ–∑–¥–∞—é—Ç—Å—è –æ–±—ã—á–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –Ω–∞ EC2, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –∏–º–µ–µ—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ AWS. 

–î–æ–ø—É—Å—Ç–∏–º, –¥–ª—è —Ç–µ—Å—Ç–∞ –Ω–∞–º –≤—ã–¥–µ–ª–∏–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ –º–∞—à–∏–Ω—ã:

```
ec2-34-250-13-236.eu-west-1.compute.amazonaws.com
ec2-34-251-255-202.eu-west-1.compute.amazonaws.com
ec2-34-251-113-56.eu-west-1.compute.amazonaws.com
ec2-52-16-175-204.eu-west-1.compute.amazonaws.com
```

‚ö†Ô∏è –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ ‚Äî¬†—ç—Ç–∏ —Ö–æ—Å—Ç–Ω–µ–π–º—ã —è–≤–ª—è—é—Ç—Å—è —Ç–∞–∫–∂–µ Public DNS –º–∞—à–∏–Ω. –ú—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ø–µ—Ä–≤–æ–π –≤ —Å–ø–∏—Å–∫–µ –º–∞—à–∏–Ω–µ ‚Äî –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∫–∞–∫ –µ—ë Public DNS (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –ø–æ SSH/HTTP), —Ç–∞–∫ –∏ Private DNS (–¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞).

#### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
–ù–∞ —ç—Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–∞—á–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–∫–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å") `npl.pem`. –≠—Ç–∏–º –∫–ª—é—á–æ–º –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–≥–æ –∫—É—Ä—Å–∞.

#### –í—ã—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –∫–ª—é—á—É
–ó–∞–π–¥–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å (–º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å –≤ MacOS, –Ω–æ –º–æ–∂–Ω–æ –≤–æ–π—Ç–∏ –∏–∑ –ª—é–±–æ–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã).

–ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –ø–æ–¥ Windows, —Ç–æ –º–æ–∂–µ—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º Putty
http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html

–°—á–∏—Ç–∞–µ–º, —á—Ç–æ –∫–ª—é—á –≤ –≤–∞—à–µ–π —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞:

`chmod 0600 npl.pem`

–° –ø–æ–º–æ—â—å—é —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –∫–ª—é—á —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ ssh –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å –µ–≥–æ "—Å–ª–∏—à–∫–æ–º –æ—Ç–∫—Ä—ã—Ç—ã–º" –∏ "–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º".

üí°**–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Å–æ–≤–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π MacOS/Linux**

–£–ø—Ä–æ—Å—Ç–∏—Ç–µ —Å–µ–±–µ –∂–∏–∑–Ω—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å SSH. –í–æ-–ø–µ—Ä–≤—ã—Ö, –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à –∫–ª—é—á –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `~/.ssh`:
`cp npl.pem ~/.ssh/.`

–í–æ-–≤—Ç–æ—Ä—ã—Ö, —Å–æ–∑–¥–∞–π—Ç–µ config-—Ñ–∞–π–ª –∏ –æ–ø–∏—à–∏—Ç–µ –≤ –Ω—ë–º –≤–∞—à–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
`touch ~/.ssh/config`

–§–∞–π–ª `config` –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ç–∞–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
Host npl-lab01
HostName ec2-34-250-13-236.eu-west-1.compute.amazonaws.com
User ubuntu
Port 22
IdentityFile {–∑–¥–µ—Å—å_–ø–æ–ª–Ω—ã–π_–ø—É—Ç—å_–¥–æ_–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏_/.ssh}/npl.pem
```

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–∫–ª—é—á—ë–Ω–Ω—ã–º, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –Ω—É–ª—å-–ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –î–ª—è —ç—Ç–æ–≥–æ –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ—á–∫—É –≤ config:

`ServerAliveInterval 60`

–ö–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É –ø–µ—Ä–µ–¥–∞–≤–∞—è –ø—É—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

–¢–µ–ø–µ—Ä—å –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ö–æ—Å—Ç–Ω–µ–π–º–∞ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞: `ssh npl-lab01`. –≠—Ç–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ. –í –¥–∞–ª—å–Ω–µ–π—à–µ–º –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –∫–æ–º–∞–Ω–¥—É, –Ω–æ –≤—ã —Ç–µ–ø–µ—Ä—å –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ—é –∂–∏–∑–Ω—å –ø—Ä–æ—â–µ.

### –ß–∞—Å—Ç—å 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ambari Server –Ω–∞ –æ–¥–Ω–æ–π –∏–∑ –º–∞—à–∏–Ω

–í–Ω–∞—á–∞–ª–µ –∑–∞–π–¥—ë–º –Ω–∞ –Ω–∞—à —Å–µ—Ä–≤–µ—Ä-–º–µ–Ω–µ–¥–∂–µ—Ä.

#### –ó–∞–π—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä ‚Ññ1 (—Å–µ—Ä–≤–µ—Ä-–º–µ–Ω–µ–¥–∂–µ—Ä)

–ó–∞—Ö–æ–¥–∏–º –Ω–∞ –ø–µ—Ä–≤—ã–π –ø–æ —Å–ø–∏—Å–∫—É —Å–µ—Ä–≤–µ—Ä –ø–æ SSH:

`ssh -i npl.pem ubuntu@<server_manager_public_dns>`

`server_manager_public_dns` ‚Äî –∞–¥—Ä–µ—Å –ø–µ—Ä–≤–æ–≥–æ –ø–æ —Å–ø–∏—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞, –Ω–∞–ø–æ–¥–æ–±–∏–µ `ec2-34-250-13-236.eu-west-1.compute.amazonaws.com`. –¢–æ –µ—Å—Ç—å, –≤ –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ –ø–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç —Ç–∞–∫–æ–π:

`ssh -i npl.pem ubuntu@ec2-34-250-13-236.eu-west-1.compute.amazonaws.com`

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç `npl.pem` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –≤–∞—à–µ–π —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–ª–∏–±–æ –≤–∞–º –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –Ω–µ–º—É).

–í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å PuTTY, —Ç–æ –≤–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è –ø–µ—Ä–µ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á –≤ —Ñ–æ—Ä–º–∞—Ç .ppk. –ú–æ–∂–µ—Ç–µ –ø–æ—á–∏—Ç–∞—Ç—å ‚Äî http://stackoverflow.com/questions/3190667/convert-pem-to-ppk-file-format

> –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ PuTTY (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Windows):
>
> 1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —Å http://lk.newprolab.com/, –∫–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 3.
>
> 2. –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ puttygen, Conversions -> Import key. –í—ã–±–∏—Ä–∞–µ—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π –∫–ª—é—á. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ ‚Äî Save private key. –°–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ passphrase. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ –≤ `private.ppk`.
>
> 3. –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ Putty, –≤ Host Name –≤–≤–æ–¥–∏—Ç–µ: `ubuntu@HOST`, –≥–¥–µ HOST - –º–∞—à–∏–Ω–∞, –≤—ã–¥–∞–Ω–Ω–∞—è –≤–∞–º –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞ –ø–µ—Ä–≤–æ–π. –î–∞–ª–µ–µ —Å–ª–µ–≤–∞ –≤—ã–±–∏—Ä–∞–µ—Ç–µ Connection -> SSH -> Auth, –≤ Private Key —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ –Ω–∞ `private.ppk`. 
>
> 4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ—Å—å –≤ Sessions –≤–ª–µ–≤–∞, –≤–≤–æ–¥–∏—Ç–µ –≤ Save Session –∫–∞–∫–æ–µ-–Ω–∏–±—É–¥—å –∏–º—è, –∏ Save. –≠—Ç–æ —á—Ç–æ–±—ã –Ω–µ –≤–≤–æ–¥–∏—Ç—å –≤—Å–µ –≤—Ç–æ—Ä–æ–π —Ä–∞–∑. –ü–æ—Ç–æ–º - Open. –ù–∞—á–Ω–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –í –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∂–µ–Ω–∏–µ, —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è.

### –°—Ç–∞–≤–∏–º Ambari –Ω–∞ —Å–µ—Ä–≤–µ—Ä-–º–µ–Ω–µ–¥–∂–µ—Ä

‚ö†Ô∏è –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–π —á–∞—Å—Ç–∏, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—Ç –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `root`. –ü–æ—ç—Ç–æ–º—É –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –∏–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å—Å—è (–≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –∫–æ–º–∞–Ω–¥—É):

`sudo su`

–î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Ambari –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω–æ–π –º–∞—à–∏–Ω–µ:

`wget -nv http://public-repo-1.hortonworks.com/ambari/ubuntu14/2.x/updates/2.4.2.0/ambari.list -O /etc/apt/sources.list.d/ambari.list`

`apt-key adv --recv-keys --keyserver keyserver.ubuntu.com B9733A7A07513CAD`

–û–±–Ω–æ–≤–ª—è–µ–º apt, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤—ã–º –ø–∞–∫–µ—Ç–∞–º Ambari:

`apt-get update`

–î–∞–ª—å—à–µ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å –ª–∏ –Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:

`apt-cache showpkg ambari-server`

`apt-cache showpkg ambari-agent`

`apt-cache showpkg ambari-metrics-assembly`

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –ª—é–±–æ–π –∏–∑ –∫–æ–º–∞–Ω–¥ –≤—ã—à–µ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```bash
root@ip-172-31-31-21
:/home/ubuntu# apt-cache showpkg ambari-server
Package: ambari-server
Versions: 
2.4.2.0-136 (/var/lib/apt/lists/public-repo-1.hortonworks.com_ambari_ubuntu14_2.x_updates_2.4.2.0_dists_Ambari_main_binary-amd64_Packages)
 Description Language: 
                 File: /var/lib/apt/lists/public-repo-1.hortonworks.com_ambari_ubuntu14_2.x_updates_2.4.2.0_dists_Ambari_main_binary-amd64_Packages
                  MD5: c6d904389bc0d41429b0c7c52796924c


Reverse Depends: 
Dependencies: 
2.4.2.0-136 - openssl (0 (null)) postgresql (2 8.1) python (2 2.6) curl (0 (null)) 
Provides: 
2.4.2.0-136 - 
Reverse Provides:
```

–¢–µ–ø–µ—Ä—å –º—ã –≥–æ—Ç–æ–≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ambari:

`apt-get install ambari-server`

–ü–∞–∫–µ—Ç –≤–µ—Å—å–º–∞ —É–≤–µ—Å–∏—Å—Ç—ã–π:

`After this operation, 744 MB of additional disk space will be used.`

–ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Ambari –±—É–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–≤–æ–¥:

```
Setting up ambari-server (2.4.2.0-136) ...
update-rc.d: warning: default stop runlevel arguments (0 1 6) do not match ambari-server Default-Stop values (0 6)
 Adding system startup for /etc/init.d/ambari-server ...
   /etc/rc0.d/K20ambari-server -> ../init.d/ambari-server
   /etc/rc1.d/K20ambari-server -> ../init.d/ambari-server
   /etc/rc6.d/K20ambari-server -> ../init.d/ambari-server
   /etc/rc2.d/S20ambari-server -> ../init.d/ambari-server
   /etc/rc3.d/S20ambari-server -> ../init.d/ambari-server
   /etc/rc4.d/S20ambari-server -> ../init.d/ambari-server
   /etc/rc5.d/S20ambari-server -> ../init.d/ambari-server
Processing triggers for libc-bin (2.19-0ubuntu6.9) ...
```

–°–µ—Ä–≤–µ—Ä Ambari —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥—ë–º –∫ –µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Ambari

–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Ambari –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º –∫–æ–Ω—Å–æ–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ, –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –∫–æ–º–∞–Ω–¥–æ–π:

`ambari-server setup`
(–Ω–µ –∑–∞–±—ã–≤–∞–µ–º, —á—Ç–æ –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∏–∑-–ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `root`)

–ù–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞ –æ—Ç–≤–µ—á–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω–æ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–∂–∏–º–∞—Ç—å Enter):

`Customize user account for ambari-server daemon [y/n] (n)?`

JDK –≤—ã–±–∏—Ä–∞–µ–º –≤–µ—Ä—Å–∏–∏ 1.8.

`Do you accept the Oracle Binary Code License Agreement [y/n] (y)? y`

```
Configuring database...
Enter advanced database configuration [y/n] (n)? n
```

–í–∏–¥–∏–º, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞:

`Ambari Server 'setup' completed successfully.`

–ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä:

`ambari-server start`

–í–∏–¥–∏–º, —á—Ç–æ –≤—Å—ë –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å: `Ambari Server 'start' completed successfully.` –î–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å: 

`ps -ef | grep Ambari`

–í—ã–≤–æ–¥:

```
root      3718     1 56 11:32 pts/0    00:00:51 /usr/jdk64/jdk1.8.0_77/bin/java -server -XX:NewRatio=3 -XX:+UseConcMarkSweepGC -XX:-UseGCOverheadLimit -XX:CMSInitiatingOccupancyFraction=60 -XX:+CMSClassUnloadingEnabled -Dsun.zip.disableMemoryMapping=true -Xms512m -Xmx2048m -XX:MaxPermSize=128m -Djava.security.auth.login.config=/etc/ambari-server/conf/krb5JAASLogin.conf -Djava.security.krb5.conf=/etc/krb5.conf -Djavax.security.auth.useSubjectCredsOnly=false -cp /etc/ambari-server/conf:/usr/lib/ambari-server/*:/usr/share/java/postgresql-jdbc.jar org.apache.ambari.server.controller.AmbariServer
```

–ú–∞—à–∏–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞, –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Å–µ—Å—Å–∏—é:

```
exit
exit
```

## –ß–∞—Å—Ç—å 3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫ Ambari –∏ —Å–æ–±—Ä–∞—Ç—å –∏–∑ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –Ω–æ–¥ –∫–ª–∞—Å—Ç–µ—Ä

–í—Å—é –¥–∞–ª—å–Ω–µ–π—à—É—é —Ä–∞–±–æ—Ç—É –≤ —ç—Ç–æ–π —á–∞—Å—Ç–∏ –±—É–¥–µ–º –≤–µ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Ambari. 

–ó–∞—Ö–æ–¥–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º –ø–æ –∞–¥—Ä–µ—Å—É `http://<ambari_server_manager_public_dns>:8080` (–≤–∞–º —Å–Ω–æ–≤–∞ –Ω—É–∂–µ–Ω Public DNS —Ç–æ–π –º–∞—à–∏–Ω—ã, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–ª–∏). –û–Ω –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –∑–∞–ø–∏—Å–∞–Ω –≤ logout-—Å–æ–æ–±—â–µ–Ω–∏–∏:

```
logout
Connection to ec2-34-250-13-236.eu-west-1.compute.amazonaws.com closed.
```

–í —Å–ª—É—á–∞–µ –Ω–∞—à–∏—Ö –º–∞—à–∏–Ω, —ç—Ç–æ http://ec2-34-250-13-236.eu-west-1.compute.amazonaws.com:8080

–õ–æ–≥–∏–Ω: `admin`

–ü–∞—Ä–æ–ª—å: `admin`

–ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∫–Ω–æ–ø–∫–∞ Launch Install Wizard:

![img0](images/img0.png)

–ù–∞–∑—ã–≤–∞–µ–º –Ω–∞—à –∫–ª–∞—Å—Ç–µ—Ä `newprolab`.

**Select Version**: —É–¥–∞–ª–∏—Ç–µ –≤—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∫—Ä–æ–º–µ ubuntu14.

![img1](images/img1.png)


**Install Options**

–í Target Hosts —É–∫–∞–∑—ã–≤–∞–µ–º *–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ* DNS-–∞–¥—Ä–µ—Å–∞ (Private DNS) –≤—Å–µ—Ö —á–µ—Ç—ã—Ä—ë—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤. –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –æ–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ `.internal`. –û–Ω–∏ –≤–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –≤ –õ–ö, —Ä—è–¥–æ–º —Å Public DNS –º–∞—à–∏–Ω.

–í Host Registration Information –¥–æ–±–∞–≤–ª—è–µ–º —Å–≤–æ–π *private* key `npl.pem`. –° –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ –∫–ª—é—á–∞ —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è Ambari –±—É–¥–µ—Ç –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ –∫–∞–∂–¥—É—é –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—É—é –≤—ã—à–µ –≤–∞–º–∏ –º–∞—à–∏–Ω—É –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã.

SSH User Account: ubuntu

SSH Port Number: 22

![img2](images/img2.png)


**Confirm Hosts**

–ù–∞ —ç—Ç–æ–º —ç–∫—Ä–∞–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∏ –¥–æ—Å—Ç—É–ø –∫ —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤–∞–º–∏ —Ö–æ—Å—Ç–∞–º. –ï—Å–ª–∏ –≤—ã –≤—Å—ë —Å–¥–µ–ª–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø—Ä–æ–±–ª–µ–º –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ, –∏ –≤—ã —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è —É–≤–∏–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Å—Ç–∞—Ç—É—Å (–≤–∞—Ä–Ω–∏–Ω–≥–∏ –Ω–∞–º –Ω–µ –ø–æ–º–µ—à–∞—é—Ç, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å –Ω–∏–º–∏):

![img3](images/img3.png)

‚ö†Ô∏è –ï—Å–ª–∏ –∂–µ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏, –≤—ã –Ω–∞–≤–µ—Ä–Ω—è–∫–∞:

* –£–∫–∞–∑–∞–ª–∏ Public –≤–º–µ—Å—Ç–æ Private DNS —Ö–æ—Å—Ç–Ω–µ–π–º—ã.
* –í—ã–±—Ä–∞–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π –∫–ª—é—á.
* –ó–∞–±—ã–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å SSH User Account –Ω–∞ ubuntu.
* –í–æ–∑–º–æ–∂–Ω–æ, —á—Ç–æ —É –≤–∞—Å –∑–∞–∫–æ–Ω—á–∏–ª—Å—è —á–∞—Å, –∏ –∏–Ω—Å—Ç–∞–Ω—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏–ª–∏—Å—å.


**Choose Services**

–ü–æ –±–æ–ª—å—à–æ–º—É —Å—á—ë—Ç—É, –Ω–∞–º –¥–ª—è —ç—Ç–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ —Å–∞–º–∞—è –±–∞–∑–∞:

* HDFS
* YARN + MapReduce2
* ZooKeeper

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞–º –Ω–µ –Ω—É–∂–Ω—ã, –≤—ã–∫–ª—é—á–∏—Ç–µ –∏—Ö. –†–∞–∑—É–º–µ–µ—Ç—Å—è, –µ—Å–ª–∏ –≤–∞–º —Ö–æ—á–µ—Ç—Å—è –ø–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, –º—ã –≤–∞—Å –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º :) –ú–æ–∂–µ—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å—Ç–∞–≤–∏—Ç—å Ambari Infra –∏ Ambari Metrics, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª–µ–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–ª–∞—Å—Ç–µ—Ä–∞.

–ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º Limited Functionality Warning. –ù–∞–∂–∏–º–∞–µ–º Proceed Anyway. –î–≤–∞–∂–¥—ã!


**Assign Masters**

–ù–∞–º —Å–µ–π—á–∞—Å –Ω–µ –æ—á–µ–Ω—å –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞, –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–≤–ª—è–µ–º –≤—Å—ë –≤ –Ω–µ—Ç—Ä–æ–Ω—É—Ç–æ–º –≤–∏–¥–µ –∏ –Ω–∞–∂–∏–º–∞–µ–º Next.


**Assign Slaves and Clients**

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –º–∞—à–∏–Ω—ã –∏–º–µ—é—Ç —Ä–æ–ª–∏ DataNode –∏ NodeManager. –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

![img32](images/img32.png) 

**Customize Services**

–ú–æ–∂–Ω–æ –ª–∏–±–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å, –ª–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ Java heap size –¥–ª—è NameNode –∏ DataNode, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 2GB.


**Review**

–í—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ø–æ—Ä—è–¥–∫–µ, —Ç–∞–∫ —á—Ç–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ Deploy.

–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—à–∏–Ω –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ:

![img4](images/img4.png) 

‚ö†Ô∏è –ï—Å–ª–∏ –≤—ã –≥–¥–µ-—Ç–æ —Å–∏–ª—å–Ω–æ –Ω–µ –æ—à–∏–±–ª–∏—Å—å, –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ –±–µ–∑ –æ—à–∏–±–æ–∫. –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å ‚Äî¬†–∑–∞–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã. –ö–æ–≥–¥–∞ —Å—Ç–∞—Ç—É—Å —Ö–æ—Å—Ç–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ Fail, –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ Message –¥–ª—è —ç—Ç–æ–≥–æ —Ö–æ—Å—Ç–∞ –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ, —á—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ –ª–æ–≥–µ. –ï—Å–ª–∏ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∑–∞–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç (–æ–±—ã—á–Ω–æ —ç—Ç–æ –Ω–µ–∫–∏–π –æ—Ç–∫–∞–∑ –≤ –¥–æ—Å—Ç—É–ø–µ: connection refused), —Ç–æ –≤–∞–º —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∫—É—Ä–∞—Ç–æ—Ä—É. –î—Ä—É–≥–∞—è –ø—Ä–∏—á–∏–Ω–∞ ‚Äî¬†–∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞, –∞ –≤—ã –µ–≥–æ –Ω–µ –ø—Ä–æ–¥–ª–∏–ª–∏.

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–µ–ø–ª–æ—è Message –¥–ª—è –≤—Å–µ—Ö —Ö–æ—Å—Ç–æ–≤ —Å–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ Success:

![img5](images/img5.png) 

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–∞–∂–∏–º–∞–µ–º Next, —Å–º–æ—Ç—Ä–∏–º Summary –∏ –∑–∞–≤–µ—Ä—à–∞–µ–º –ø—Ä–æ—Ü–µ–¥—É—Ä—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞. –ï—Å–ª–∏ –≤–∞–º —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–µ –≤–µ–∑—ë—Ç, —Ç–æ –≤ Summary –≤—ã —É–≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ –∏–ª–∏ –≤–∞—Ä–Ω–∏–Ω–≥–∏, –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç —Å–∫–∞–∑–∞–Ω–æ –¥–∞–ª—å—à–µ.

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–æ–º Ambari
Ambari –Ω–∞ —Ä–∞–±–æ—á–µ–º –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

![img6](images/img6.png) 

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã, –≤—ã —ç—Ç–æ —Å—Ä–∞–∑—É –∂–µ –≤–∏–¥–∏—Ç–µ –ø–æ –∫—Ä–∞—Å–Ω–æ–º—É —Ü–≤–µ—Ç—É:

![img7](images/img7.png) 

–î–ª—è –Ω–∞—à–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –Ω–∞–ª–∏—á–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –¥–æ–ø—É—Å—Ç–∏–º–æ, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –∏—Ö –ª—É—á—à–µ  —Ä–∞–∑–æ–±—Ä–∞—Ç—å ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–π—Ç–∏ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ö–æ—Å—Ç–∞, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ –ø–æ–ø–∞—Å—Ç—å –∏–∑ —Å—Ç–∞—Ç—É—Å-–ø–∞–Ω–µ–ª–∏ –≤–µ—Ä—Ö–Ω–µ–≥–æ –º–µ–Ω—é:

![img8](images/img8.png) 

–°–º–æ—Ç—Ä–∏–º –Ω–∞ –∞–ª–µ—Ä—Ç—ã, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤–æ –≤–∫–ª–∞–¥–∫—É Summary. –í–ø–æ–ª–Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å:

![img9](images/img9.png) 

–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, —Å–º–æ—Ç—Ä–∏—Ç–µ –∞–ª–µ—Ä—Ç—ã –∏, –µ—Å–ª–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –Ω–µ —É–¥–∞—ë—Ç—Å—è, –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∑–∞ –ø–æ–º–æ—â—å—é –∫ –∫—É—Ä–∞—Ç–æ—Ä—É –∏–ª–∏ –∫–æ–ª–ª–µ–≥–∞–º. –£ –Ω–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–±–ª–µ–º–∞, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Ç–æ–∂–µ –Ω–µ—Å–ª–æ–∂–Ω–∞—è.

## –ß–∞—Å—Ç—å 4. –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ

–°–Ω–æ–≤–∞ –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –ø–µ—Ä–≤–æ–π –Ω–æ–¥–µ –∫–ª–∞—Å—Ç–µ—Ä–∞:

`ssh -i npl.pem ubuntu@ec2-34-250-13-236.eu-west-1.compute.amazonaws.com`

–ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–∑–¥–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `hdfs` (—á–µ—Ä–µ–∑ –Ω–µ–≥–æ –º—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å HDFS, –≤ —Ç–æ–º —á–∏—Å–ª–µ, –∑–∞–ø—É—Å–∫–∞—Ç—å MapReduce jobs):

`sudo cat /etc/passwd | grep hdfs`

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤—ã–≤–æ–¥: `hdfs:x:1003:1001::/home/hdfs:`. –ï—Å–ª–∏ –∂–µ –≤—ã–≤–æ–¥ –ø—É—Å—Ç–æ–π, –≤–∞–º –Ω—É–∂–Ω–æ –∑–∞–Ω–æ–≤–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É –¥–µ–ø–ª–æ—è –∫–ª–∞—Å—Ç–µ—Ä–∞: –≤—ã —Ç–∞–º –¥–æ–ø—É—Å—Ç–∏–ª–∏ –æ—à–∏–±–∫—É.

–í—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º `hdfs`:

`sudo su hdfs`

–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞ NPL: 

`wget http://data.newprolab.com/public-newprolab-com/numbers.txt.lzma -O /tmp/numbers.txt.lzma`

–†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º:

`lzma -d /tmp/numbers.txt.lzma`

–°–æ–∑–¥–∞—ë–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/users/numbers` –Ω–∞ HDFS: 

`hdfs dfs -mkdir -p /users/numbers`

–ò —Å–∫–∏–¥—ã–≤–∞–µ–º –≤ –Ω–µ—ë –Ω–∞—à —Ñ–∞–π–ª:

`hdfs dfs -put /tmp/numbers.txt /users/numbers/`

–û–±–Ω–æ–≤–ª—è–µ–º mapreduce jar-—Ñ–∞–π–ª, –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –≤ HDFS. –î–ª—è —ç—Ç–æ–≥–æ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–∞—è –≤–µ—Ä—Å–∏—è HDP —É –≤–∞—Å —Å—Ç–æ–∏—Ç:

`hdfs dfs -ls /hdp/apps`

–ü–æ—á—Ç–∏ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —ç—Ç–æ `2.5.3.0-37`, –ø–æ—ç—Ç–æ–º—É –≤—ã –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

```
hdfs dfs -rm /hdp/apps/2.5.3.0-37/mapreduce/mapreduce.tar.gz
hdfs dfs -put /usr/hdp/2.5.3.0-37/hadoop/mapreduce.tar.gz /hdp/apps/2.5.3.0-37/mapreduce/mapreduce.tar.gz
```

–ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è, —Ç–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω—É–∂–Ω–æ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π.

–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å MapReduce Job:

`hadoop jar /usr/hdp/2.5.3.0-37/hadoop-mapreduce/hadoop-streaming.jar -D mapred.reduce.tasks=1 -input /users/numbers -output /users/numbers/result -mapper "cat" -reducer "uniq -c"`

–ú—ã –∑–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç—ã–µ cli-—É—Ç–∏–ª–∏—Ç—ã `cat` –∏ `uniq`, —Å—á–∏—Ç–∞–µ–º —á–∏—Å–ª–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫ ‚Äî¬†–Ω–∏—á–µ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –Ω–∏–∂–Ω—é—é —Å—Ç—Ä–æ—á–∫—É –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –≤—ã–≤–æ–¥–∞:

```
hdfs@ip-172-31-31-216:/home/ubuntu$ hadoop jar /usr/hdp/2.5.3.0-37/hadoop-mapreduce/hadoop-streaming.jar -D mapred.reduce.tasks=1 -input /users/numbers -output /users/numbers/result -mapper "cat" -reducer "uniq -c"
packageJobJar: [] [/usr/hdp/2.5.3.0-37/hadoop-mapreduce/hadoop-streaming-2.7.3.2.5.3.0-37.jar] /tmp/streamjob2587638631410685436.jar tmpDir=null
17/03/02 12:10:42 INFO impl.TimelineClientImpl: Timeline service address: http://ip-172-31-25-87.eu-west-1.compute.internal:8188/ws/v1/timeline/
17/03/02 12:10:42 INFO client.RMProxy: Connecting to ResourceManager at ip-172-31-25-87.eu-west-1.compute.internal/172.31.25.87:8050
17/03/02 12:10:42 INFO client.AHSProxy: Connecting to Application History server at ip-172-31-25-87.eu-west-1.compute.internal/172.31.25.87:10200
17/03/02 12:10:42 INFO impl.TimelineClientImpl: Timeline service address: http://ip-172-31-25-87.eu-west-1.compute.internal:8188/ws/v1/timeline/
17/03/02 12:10:42 INFO client.RMProxy: Connecting to ResourceManager at ip-172-31-25-87.eu-west-1.compute.internal/172.31.25.87:8050
17/03/02 12:10:42 INFO client.AHSProxy: Connecting to Application History server at ip-172-31-25-87.eu-west-1.compute.internal/172.31.25.87:10200
17/03/02 12:10:43 INFO mapred.FileInputFormat: Total input paths to process : 1
17/03/02 12:10:43 INFO mapreduce.JobSubmitter: number of splits:2
17/03/02 12:10:43 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1488455605010_0003
17/03/02 12:10:44 INFO impl.YarnClientImpl: Submitted application application_1488455605010_0003
17/03/02 12:10:44 INFO mapreduce.Job: The url to track the job: http://ip-172-31-25-87.eu-west-1.compute.internal:8088/proxy/application_1488455605010_0003/
```

–ü–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å –¥–∂–æ–±—ã –∏ —É–≤–∏–¥–µ—Ç—å –ª–æ–≥–∏ —Å –æ—à–∏–±–∫–∞–º–∏. –û–¥–Ω–æ –Ω–µ—É–¥–æ–±—Å—Ç–≤–æ ‚Äî¬†–∑–¥–µ—Å—å —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è Internal DNS –Ω–æ–¥—ã, –∞ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –≤—ã –º–æ–∂–µ—Ç–µ —Ç–æ–ª—å–∫–æ –∫ Public DNS. 

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–∂–æ–±—ã —É–≤–∏–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:

```
17/03/02 12:11:25 INFO mapreduce.Job: Job job_1488455605010_0003 completed successfully
17/03/02 12:11:25 INFO mapreduce.Job: Counters: 49
...
[[–¥–ª–∏–Ω–Ω—ã–π –∫—É—Å–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏]]
...
17/03/02 12:11:25 INFO streaming.StreamJob: Output directory: /users/numbers/result
```

–°–º–æ—Ç—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `hdfs dfs -cat /users/numbers/result/* | sort | tail`

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è:

```
70	25523
70	26624
70	394
70	4348
70	6051
70	7310
70	9731
71	38644
71	48445
73	23657
```
–ï—Å–ª–∏ –≤—ã —Å–æ–≤–µ—Ä—à–∏–ª–∏ –æ—à–∏–±–∫—É –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∑–∞–¥–∞–Ω–∏–∏, —Ç–æ –º–æ–∂–µ—Ç–µ —Å—Ç–µ—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ HDFS –∏ –Ω–∞—á–∞—Ç—å –≤—Å—ë —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã:

`$ hdfs dfs -rm -r -f /users/ && hdfs dfs -mkdir -p /users/numbers`

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è –Ω–∞ 
http://lk.newprolab.com/amazon/ . –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å", –Ω–µ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –≤—Ä—É—á–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É: –ø—Ä–∏–¥—ë—Ç—Å—è –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å.
